<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>井字棋游戏</title>
    <style>
      table {
        border-collapse: collapse;
        margin: 20px auto;
      }
      td {
        width: 100px;
        height: 100px;
        border: 2px solid black;
        text-align: center;
        font-size: 2em;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1>井字棋游戏</h1>
    <table id="board">
      <tr>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>
    <script>
      let currentPlayer = "X";
      let gameOver = false;
      const board = [];
      for (let i = 0; i < 3; i++) {
        board.push(["", "", ""]);
      }

      function checkWin() {
        const winConditions = [
          [
            [0, 0],
            [0, 1],
            [0, 2],
          ],
          [
            [1, 0],
            [1, 1],
            [1, 2],
          ],
          [
            [2, 0],
            [2, 1],
            [2, 2],
          ],
          [
            [0, 0],
            [1, 0],
            [2, 0],
          ],
          [
            [0, 1],
            [1, 1],
            [2, 1],
          ],
          [
            [0, 2],
            [1, 2],
            [2, 2],
          ],
          [
            [0, 0],
            [1, 1],
            [2, 2],
          ],
          [
            [0, 2],
            [1, 1],
            [2, 0],
          ],
        ];

        for (const condition of winConditions) {
          const [a, b, c] = condition;
          if (
            board[a[0]][a[1]] &&
            board[a[0]][a[1]] === board[b[0]][b[1]] &&
            board[a[0]][a[1]] === board[c[0]][c[1]]
          ) {
            return board[a[0]][a[1]];
          }
        }
        return null;
      }

      function checkDraw() {
        for (let i = 0; i < 3; i++) {
          for (let j = 0; j < 3; j++) {
            if (board[i][j] === "") {
              return false;
            }
          }
        }
        return true;
      }

      function handleClick(row, col) {
        if (board[row][col] === "" && !gameOver) {
          board[row][col] = currentPlayer;
          document.getElementById("board").rows[row].cells[col].textContent =
            currentPlayer;
          const winner = checkWin();
          if (winner) {
            alert(`${winner} 获胜！`);
            gameOver = true;
          } else if (checkDraw()) {
            alert("平局！");
            gameOver = true;
          } else {
            currentPlayer = currentPlayer === "X" ? "O" : "X";
          }
        }
      }

      // 初始化游戏
      document.querySelectorAll("#board td").forEach((cell, index) => {
        const row = Math.floor(index / 3);
        const col = index % 3;
        cell.addEventListener("click", () => handleClick(row, col));
      });
    </script>
  </body>
</html>
